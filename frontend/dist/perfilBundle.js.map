{"version":3,"file":"perfilBundle.js","mappings":";;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA,yFAAyF,OAAO;AAChG;AACA;AACA;AACA;AACA;AACA;AACA,6CAA6C;AAC7C;AACA,mDAAmD;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iFAAiF,OAAO;AACxF;AACA,2CAA2C;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC,gCAAgC,WAAW,UAAU;AAC5F,mCAAmC,IAAI,IAAI,OAAO;AAClD;AACA,OAAO;AACP,MAAM;AACN;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc,UAAU;AACxB,yCAAyC,qBAAqB;AAC9D,6CAA6C,cAAc;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6CAA6C,MAAM;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC,gBAAgB,oBAAoB,gBAAgB;AAC7F;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4DAA4D;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,KAAK;AACpC;AACA,2BAA2B,KAAK;AAChC,KAAK;AACL;AACA;AACA,2BAA2B,UAAU;AACrC,qCAAqC,qBAAqB;AAC1D,yCAAyC,aAAa;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,UAAU;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,WAAW;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,oBAAoB;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU,iBAAiB;AAC3B;AACA,oCAAoC,gBAAgB,GAAG,iBAAiB;AACxE;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,CAAC","sources":["webpack://frontend/./src/js/page_actions/perfil.js"],"sourcesContent":["// Recupera o ID do usuário logado\r\nconst userId = sessionStorage.getItem('user_id') || localStorage.getItem('loggedUserId');\r\n\r\nif (!userId) {\r\n    alert('ID do usuário não encontrado. Faça login novamente.');\r\n    window.location.href = './login_funcionario.html';\r\n} else {\r\n    window.addEventListener('DOMContentLoaded', async () => {\r\n        const resume = document.getElementById('resume');\r\n        const personalInfo = document.getElementById('personal-info');\r\n        const socialMidia = document.getElementById('social-midia');\r\n\r\n        try {\r\n            const response = await fetch(`http://localhost:3001/skilltech/api/v1/users/${userId}`);\r\n            if (!response.ok) throw new Error(\"Falha ao buscar dados do usuário\");\r\n\r\n            const user = await response.json();\r\n\r\n            user.name = user.name || user.nome || 'Usuário sem nome';\r\n            user.email = user.email || 'Email não informado';\r\n            user.address = user.address || { street: 'Endereço não informado' };\r\n            user.areas_of_interest = user.areas_of_interest || [];\r\n            user.enterprise = user.enterprise || { name: 'Empresa não informada' };\r\n            user.social_midias = Array.isArray(user.social_midias) ? user.social_midias : [];\r\n            user.img = user.img || 'https://bootdey.com/img/Content/avatar/avatar7.png';\r\n\r\n            renderResume(resume, user);\r\n            renderPersonalInfo(personalInfo, user);\r\n            renderSocialMidia(socialMidia, user);\r\n\r\n            await renderUserCurses(userId);\r\n        } catch (error) {\r\n            console.error(\"Erro ao carregar perfil:\", error);\r\n            resume?.remove();\r\n            personalInfo?.remove();\r\n            socialMidia?.remove();\r\n        }\r\n    });\r\n}\r\n\r\nasync function renderUserCurses(userId) {\r\n  const ul = document.getElementById('curso-lista');\r\n  ul.innerHTML = '';\r\n\r\n  try {\r\n    const response = await fetch(`http://localhost:3001/skilltech/api/v1/users/${userId}/curses`);\r\n   if (!response.ok) {\r\n  const errorText = await response.text(); // lê mesmo respostas não JSON\r\n  console.error(\"Resposta inválida do servidor:\", errorText);\r\n  ul.innerHTML = '<li>Erro ao carregar cursos.</li>';\r\n  return;\r\n}\r\n\r\n    \r\n\r\n    let cursos = [];\r\n        try {\r\n        const text = await response.text();\r\n        cursos = text ? JSON.parse(text) : [];\r\n        } catch (jsonErr) {\r\n        console.error('Erro ao fazer parsing do JSON:', jsonErr);\r\n        ul.innerHTML = '<li>Erro ao interpretar os dados dos cursos.</li>';\r\n        return;\r\n        }\r\n\r\n\r\n    if (Array.isArray(cursos) && cursos.length > 0) {\r\n      cursos.forEach(curso => {\r\n        const li = document.createElement('li');\r\n        const titulo = curso.title || 'Curso sem título';\r\n        const url = curso.title ? `./${formatarNomeParaArquivo(titulo)}.html?id=${curso._id}` : '#';\r\n        li.innerHTML = `<a href=\"${url}\">${titulo}</a>`;\r\n        ul.appendChild(li);\r\n      });\r\n    } else {\r\n      ul.innerHTML = '<li>Nenhum curso cadastrado ainda.</li>';\r\n    }\r\n  } catch (err) {\r\n    console.error('Erro ao carregar cursos do usuário:', err);\r\n    ul.innerHTML = '<li>Erro ao carregar cursos.</li>';\r\n  }\r\n}\r\n\r\n\r\nfunction renderResume(father, data) {\r\n    father.innerHTML = '';\r\n    const cardFlex = document.createElement('div');\r\n    const image = document.createElement('img');\r\n    const mt3 = document.createElement('div');\r\n    cardFlex.className = 'd-flex flex-column align-items-center text-center';\r\n\r\n    image.src = data.img;\r\n    image.className = 'rounded-circle';\r\n    image.width = '150';\r\n    image.alt = 'Admin';\r\n\r\n    let areasInterest = data.areas_of_interest.join(', ') || 'Sem áreas de interesse';\r\n\r\n    mt3.className = 'mt-3';\r\n    mt3.innerHTML = `\r\n        <h4>${data.name}</h4>\r\n        <p class=\"text-secondary mb-1\">${data.enterprise.name}</p>\r\n        <p class=\"text-muted font-size-sm\">${areasInterest}</p>\r\n        <button class=\"btn btn-primary\">Follow</button>\r\n        <button class=\"btn btn-outline-primary\">Message</button>\r\n    `;\r\n\r\n    cardFlex.appendChild(image);\r\n    cardFlex.appendChild(mt3);\r\n    father.appendChild(cardFlex);\r\n}\r\n\r\nfunction renderPersonalInfo(father, data) {\r\n    father.innerHTML = '';\r\n\r\n    const makeRow = (label, value) => {\r\n        const row = document.createElement('div');\r\n        row.className = 'row';\r\n\r\n        const col1 = document.createElement('div');\r\n        col1.className = 'col-sm-3';\r\n        col1.innerHTML = `<h6 class=\"mb-0\">${label}</h6>`;\r\n\r\n        const col2 = document.createElement('div');\r\n        col2.className = 'col-sm-9 text-secondary';\r\n        col2.textContent = value || '-';\r\n\r\n        row.appendChild(col1);\r\n        row.appendChild(col2);\r\n        father.appendChild(row);\r\n        father.appendChild(document.createElement('hr'));\r\n    };\r\n\r\n    makeRow('Full Name', data.name);\r\n    makeRow('Email', data.email);\r\n    makeRow('CPF', data.cpf || 'Não informado');\r\n    makeRow('Address', data.address.street);\r\n}\r\n\r\nfunction renderSocialMidia(father, data) {\r\n    father.innerHTML = '';\r\n    const ul = document.createElement('ul');\r\n    ul.className = 'list-group list-group-flush';\r\n\r\n    if (data.social_midias.length === 0) {\r\n        const li = document.createElement('li');\r\n        li.className = 'list-group-item text-muted';\r\n        li.textContent = 'Nenhuma rede social cadastrada.';\r\n        ul.appendChild(li);\r\n    } else {\r\n        data.social_midias.forEach((socialMidia) => {\r\n            const li = document.createElement('li');\r\n            const h6 = document.createElement('h6');\r\n            const span = document.createElement('span');\r\n\r\n            li.className = 'list-group-item d-flex justify-content-between align-items-center flex-wrap';\r\n            h6.className = 'mb-0';\r\n            span.className = 'text-secondary';\r\n\r\n            h6.textContent = socialMidia.name;\r\n            span.innerHTML = `<a href=\"${socialMidia.url}\" target=\"_blank\">${socialMidia.url}</a>`;\r\n\r\n            li.appendChild(h6);\r\n            li.appendChild(span);\r\n            ul.appendChild(li);\r\n        });\r\n    }\r\n\r\n    father.appendChild(ul);\r\n}\r\n\r\nfunction formatarNomeParaArquivo(nome) {\r\n    return nome\r\n        .toLowerCase()\r\n        .replace(/ç/g, 'c')\r\n        .replace(/á|ã|â|à/g, 'a')\r\n        .replace(/é|ê|è/g, 'e')\r\n        .replace(/í|ì/g, 'i')\r\n        .replace(/ó|ô|õ|ò/g, 'o')\r\n        .replace(/ú|ù/g, 'u')\r\n        .replace(/ /g, '_')\r\n        .replace(/[^\\w\\-]/g, '');\r\n}\r\n\r\n\r\n\r\n/*const UserService = require('../services/userServices');\r\n\r\nconst userService = new UserService();\r\n\r\n/*const resume = document.getElementById('resume');\r\nconst personalInfo = document.getElementById('personal-info');\r\nconst socialMidia = document.getElementById('social-midia');*/\r\n\r\n\r\n\r\n/*window.onload = async () => {\r\n    try{\r\n        const id = sessionStorage.getItem('user_id');\r\n        const user = await userService.getDataById(id);\r\n        renderResume(resume, user);\r\n        renderPersonalInfo(personalInfo, user);\r\n        renderSocialMidia(socialMidia, user);\r\n    }catch(error){\r\n        console.error(error);\r\n    }\r\n}*/\r\n\r\n/*window.onload = async () => {\r\n    const id = sessionStorage.getItem('user_id');\r\n\r\n    // Se não houver ID do usuário, remove todo o conteúdo de perfil\r\n    if (!id) {\r\n        console.warn(\"Usuário não autenticado. Ocultando conteúdo.\");\r\n        document.getElementById('resume')?.remove();\r\n        document.getElementById('personal-info')?.remove();\r\n        document.getElementById('social-midia')?.remove();\r\n        return;\r\n    }\r\n\r\n    try {\r\n        const user = await userService.getDataById(id);\r\n\r\n        // Se não vier usuário ou nome, oculta também\r\n        if (!user || !user.name) {\r\n            console.warn(\"Dados incompletos. Ocultando conteúdo.\");\r\n            document.getElementById('resume')?.remove();\r\n            document.getElementById('personal-info')?.remove();\r\n            document.getElementById('social-midia')?.remove();\r\n            return;\r\n        }\r\n\r\n        renderResume(resume, user);\r\n        renderPersonalInfo(personalInfo, user);\r\n        renderSocialMidia(socialMidia, user);\r\n\r\n    } catch (error) {\r\n        console.error(\"Erro ao carregar perfil:\", error);\r\n        // Em caso de erro, oculta o conteúdo\r\n        document.getElementById('resume')?.remove();\r\n        document.getElementById('personal-info')?.remove();\r\n        document.getElementById('social-midia')?.remove();\r\n    }\r\n};\r\n\r\n\r\nfunction renderResume(father, data){\r\n    father.innerHTML = '';\r\n    const cardFlex = document.createElement('div');\r\n    const image = document.createElement('img');\r\n    const mt3 = document.createElement('div');\r\n    cardFlex.className = 'd-flex flex-column align-items-center text-center';\r\n\r\n    image.src = data.img;\r\n    image.className = 'rounded-circle';\r\n    image.width = '150';\r\n    image.alt = 'Admin';\r\n    \r\n    var areasIterest = '';\r\n    data.areas_of_interest.forEach((area, i) => {\r\n        if(!(i === data.areas_of_interest.length - 1))\r\n            areasIterest += `${area}, `;\r\n        else\r\n        areasIterest += `${area}.`;\r\n    }); \r\n\r\n    mt3.className = 'mt-3';\r\n    mt3.innerHTML = `<h4>${data.name}</h4>\r\n    <p class=\"text-secondary mb-1\">${data.enterprise.name}</p>\r\n    <p class=\"text-muted font-size-sm\">${areasIterest}</p>\r\n    <button class=\"btn btn-primary\">Follow</button>\r\n    <button class=\"btn btn-outline-primary\">Message</button>`;\r\n    \r\n    cardFlex.appendChild(image);\r\n    cardFlex.appendChild(mt3);\r\n    father.appendChild(cardFlex);\r\n}\r\n\r\nfunction renderPersonalInfo(father, data){\r\n    father.innerHTML = '';\r\n    const row1 = document.createElement('div');\r\n    const coilName = document.createElement('div');\r\n    const coilName2 = document.createElement('div');\r\n\r\n    row1.className = 'row';\r\n    coilName.className = 'col-sm-3';\r\n    coilName2.className = 'col-sm-9 text-secondary';\r\n\r\n    coilName.innerHTML = `<h6 class=\"mb-0\">Full Name</h6>`;\r\n    coilName2.innerHTML = `${data.name}`;\r\n    row1.appendChild(coilName);\r\n    row1.appendChild(coilName2);\r\n\r\n    father.appendChild(row1);\r\n\r\n    const row2 = document.createElement('div');\r\n    const coilEmail = document.createElement('div');\r\n    const colEmail2 = document.createElement('div');\r\n\r\n    row2.className = 'row';\r\n    coilEmail.className = 'col-sm-3';\r\n    colEmail2.className = 'col-sm-9 text-secondary';\r\n\r\n    coilEmail.innerHTML = `<h6 class=\"mb-0\">Email</h6>`;\r\n    colEmail2.innerHTML = `${data.email}`;\r\n    row2.appendChild(coilEmail);\r\n    row2.appendChild(colEmail2);\r\n\r\n    father.appendChild(row2);\r\n\r\n    const row3 = document.createElement('div');\r\n    const coilAddress = document.createElement('div');\r\n    const coilAddress2 = document.createElement('div');\r\n\r\n    row3.className = 'row';\r\n    coilAddress.className = 'col-sm-3';\r\n    coilAddress2.className = 'col-sm-9 text-secondary';\r\n\r\n    coilAddress.innerHTML = `<h6 class=\"mb-0\">Address</h6>`;\r\n    coilAddress2.innerHTML = `${data.address.street}`;\r\n    row3.appendChild(coilAddress);\r\n    row3.appendChild(coilAddress2);\r\n\r\n    father.appendChild(row3);\r\n}\r\n\r\nfunction renderSocialMidia(father, data){\r\n    father.innerHTML = '';\r\n    const ul = document.createElement('ul');\r\n    ul.className = 'list-group list-group-flush';\r\n    \r\n    data.social_midias.forEach((socialMidia) => {\r\n        const li = document.createElement('li');\r\n        const h6 = document.createElement('h6');\r\n        const span = document.createElement('span');\r\n\r\n        li.className = 'list-group-item d-flex justify-content-between align-items-center flex-wrap';\r\n        h6.className = 'mb-0';\r\n        span.className = 'text-secondary';\r\n\r\n        h6.innerHTML = `<svg xmlns=\"http://www.w3.org/2000/svg\"\r\n        width=\"24\" \r\n        height=\"24\" \r\n        viewBox=\"0 0 24 24\" \r\n        fill=\"none\" \r\n        stroke=\"currentColor\" \r\n        stroke-width=\"2\" \r\n        stroke-linecap=\"round\" \r\n        stroke-linejoin=\"round\" \r\n        class=\"feather \r\n        feather-globe mr-2 icon-inline\">\r\n        <circle cx=\"12\" cy=\"12\" r=\"10\">\r\n        </circle>\r\n        <line x1=\"2\" y1=\"12\" x2=\"22\" y2=\"12\">\r\n        </line>\r\n        <path d=\"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z\">\r\n        </path></svg>\r\n        ${socialMidia.name}`;\r\n\r\n        span.innerHTML = `<a href=${socialMidia.url}>${socialMidia.name}</a>`;\r\n\r\n        li.appendChild(h6);\r\n        li.appendChild(span);\r\n        \r\n        ul.appendChild(li);\r\n    });\r\n    father.appendChild(ul);\r\n}*/\r\n"],"names":[],"sourceRoot":""}